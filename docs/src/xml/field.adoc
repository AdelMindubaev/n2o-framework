== Поля ввода

Компоненты ввода и вывода в полях виджета.

Библиотека компонентов::
```
http://n2oapp.net/framework/config/schema/control-2.0
```
=== Базовые свойства

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|id
|Строка
|Идентификатор поля
|

|help
|Строка
|Подсказка по полю
|

|label
|Строка
|Заголовок поля
|Из наименования соответствующего поля выборки виджета

|label-class
|Строка
|Класс для заголовка поля
|

|no-label
|true false
|Не отображать заголовок
|false

|src
|React компонент
|Реализация компонента
|

|class
|Строка
|CSS класс стилей
|

|style
|CSS свойство
|Стиль поля
|

|required
|true false
|Обязательность поля
|false

|visible
|true false
|Видимость поля
|true

|readonly
|true false
|Преобразование компонента только для чтения
|false

|enabled
|true false
|Блокирование поля
|true

|description
|Строка
|Описание поля
|

|copied
|true false
|Копируется ли это поле при upload="copy"
|false

|depends-on
|Строка
|Зависимость от полей
|

|===

==== <dependencies>
Зависимости компонента

Пример::
[source,xml]
----
<input-text id="name">
  <dependencies>
    ...
  </dependencies>
</input-text>
----

===== <enabling>
Условие доступности

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|on
|Строка
|Поля, от которых зависит условие доступности
|Вычисляется по условию

|===

Тело::
Java Script выражение

Пример::
[source,xml]
----
<dependencies>
  <enabling on="type">type.id == 1</enabling>
  <!-- Поле доступно, если type.id равен 1 -->
</dependencies>
----

===== <visibility>
Условие видимости

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|on
|Строка
|Поля, от которых зависит условие видимости
|Вычисляется по условию

|reset
|true false
|Сбросить значение при скрытии
|true

|===

Тело::
Java Script выражение

Пример::
[source,xml]
----
<dependencies>
  <visibility on="type" reset="false">type.id == 1</visibility>
  <!-- Поле видимо, если type.id равен 1 -->
</dependencies>
----

===== <reset>
Сброс значения

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|on
|Строка
|Поля, от которых зависит условие сброса
|Вычисляется по условию

|===

Тело::
Java Script выражение

Пример::
[source,xml]
----
<dependencies>
  <reset on="type">type.id == 1</reset>
  <!-- Сбросить значение, если type.id равен 1 -->
</dependencies>
----

===== <fetch-value>
Обновление модели поля ввода

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|on
|Строка
|Поля, от которых зависит условие видимости
|Вычисляется по условию

|query-id
|Строка
|Запрос за данными
|

|value-field-id
|Строка
|Поле выборки, значение которого будет проставлено в модель поля ввода
|name

|===

Тело::
Список префильтров

Пример::
[source,xml]
----
<dependencies>
  <fetch-value on="type" query-id="queryId" value-field-id="name">
      <pre-filters>
          ...
      </pre-filters>
  </fetch-value>
  <!-- При изменении поля type будет выполнен запрос за данными и значение name будет проставлено в текущее поле -->
</dependencies>
----

===== <set-value>
Условие установки значений

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|on
|Строка
|Поля, от которых зависит установка значений
|Вычисляется по условию

|apply-on-init
|true false
|Срабатывает ли при инициализации виджета?
|true


|===

Тело::
Java Script тело функции

Пример::
[source,xml]
----
<dependencies>
  <set-value on="type">
    if (type.id == 1)
      return "Test";
  </set-value>
  <!-- Поле заполнится значением "Test", если type.id равен 1 -->
</dependencies>
----

===== <mandatory>
Условие обязательности заполнения

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|on
|Строка
|Поля, от которых зависит условие обязательности заполнения
|Вычисляется по условию

|===

Тело::
Java Script выражение

Пример::
[source,xml]
----
<dependencies>
  <requiring on="type">type.id == 1</requiring>
  <!-- Поле обязательно для заполнения, если type.id равен 1 -->
</dependencies>
----

==== <validations>
Валидации компонента

Атрибуты::
[cols="2,4,4,1"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|white-list
|Список идентификаторов через запятую
|Валидации объекта, сообщения которых будут показаны под этим полем
|

|===

Пример::
[source,xml]
----
<validations white-list="checkUniqueName, checkAdult">
    ...
</validations>
----

Тело::
link:#__validations_3[Список валидаций]

==== <toolbar>
Панель действий компонента

Пример::
[source,xml]
----
<input-text>
  <toolbar>
    ...
  </toolbar>
</input-text>
----

===== <button>
Кнопка действия

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|id
|Строка
|Идентификатор
|

|label
|Строка
|Заголовок кнопки
|

|icon
|CSS класс
|Иконка
|

|type
|text, icon, textAndIcon
|Кнопка с иконкой или без
|Если задан `icon`, то `iconAndText`, иначе `text`

|class
|https://getbootstrap.com/docs/4.0/components/buttons/#examples[CSS класс]
|CSS класс кнопки
|

|style
|CSS свойство
|Стиль кнопки
|

|action-id
|Ссылка на link:#__action[действие поля]
|Действие поля, которое будет вызвано при нажатии на кнопку
|

|===

Тело::
link:#_Действия[Обработчик действия]

Пример::
[source,xml]
----
<toolbar>
  <button id="add" icon="icon-plus">
    <show-modal page-id="card" submit-operation-id="create"/>
  </button>
</toolbar>
----

=== Базовые свойства простых компонентов

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|default-value
|Строка
|Значение по умолчанию простого компонента
|

|===

=== Базовые свойства списковых компонентов

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|query-id
|Идентификатор выборки
|Выборка, возвращающая список вариантов для выбора.
Если не задана, необходимо задать <options>.
|

|label-field-id
|Поле выборки
|Поле выборки, отвечающее за отображение варианта выбора
|

|search-filter-id
|Поле выборки
|Поле выборки, отвечающее за поиск вариантов выбора
|label-field-id

|group-field-id
|Поле выборки
|Поле выборки, отвечающее за группировку вариантов выбора
|

|image-field-id
|Поле выборки
|Поле выборки, отвечающее за картинку вариантов выбора
|

|badge-field-id
|Поле выборки
|Поле выборки, отвечающее за значение в ячейке с текстом
|

|badge-color-field-id
|Поле выборки
|Поле выборки, отвечающее за цвет ячейки с текстом
|

|icon-field-id
|Поле выборки
|Поле выборки, отвечающее за иконку вариантов выбора
|

|cache
|true false
|Кэшировать результаты выборки
|false

|size
|Число
|Количество вариантов выбора на одной странице
|30

|search
|true false
|Возможность поиска по значению
|true, если есть query-id

|===

==== <default-value>
Значение по умолчанию спискового компонента

Атрибуты::
Свойства модели спискового компонента

Пример::
[source,xml]
----
<select id="gender">
  <default-value id="1" name="Мужской"/>
</select>
----

==== <options>
Список вариантов для выбора


Пример::
[source,xml]
----
<select id="gender">
  <options>
    ...
  </options>
</select>
----

===== <option>
Вариант выбора


Атрибуты::
Свойства модели спискового компонента

Пример::
[source,xml]
----
<options>
  <option id="1" name="Мужской"/>
  <option id="2" name="Женский"/>
</options>
----

==== <pre-filters>
Предустановленные фильтры выборки спискового компонента

Тело::
link:#_Предустановленная_фильтрация_pre_filters[Предустановленные фильтры]

Пример::
[source,xml]
----
<select query-id="contacts">
  <pre-filters>
    <eq field-id="type" value="{type.id}"/>
  </pre-filters>
</select>
----

=== Базовые свойства интервальных компонентов

==== <default-value>
Значение по умолчанию интервального компонента

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|begin
|Строка
|Значение начала интервала
|

|end
|Строка
|Значение окончания интервала
|

|utc
|true false
|Всемирное координированное время
|false

|===

Пример::
[source,xml]
----
<date-interval>
  <default-value begin="01.01.2019" end="31.12.2019"/>
</date-interval>
----

=== <input-text>
Компонент ввода однострочного текста или чисел

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|domain
|string, integer, numeric, byte, short
|Тип данных
|

|length
|Число
|Максимальное количество символов в тексте (используется только для domain="string")
|

|max
|Число
|Максимальное допустимое число (используется только для числовых domain)
|

|min
|Число
|Минимальное допустимое число (используется только для числовых domain)
|

|step
|Строка
|Шаг инкремента / декремента чисел (используется только для числовых domain).
Если step="0", то кнопки "вверх вниз" будут отсутствовать
|Для domain целых чисел step="1", для domain numeric step="0.01"

|===

Пример::
[source,xml]
----
<input-text id="name" length="10" domain="string">
----

=== <auto-complete>
Компонент ввода текста с автоподбором

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|query-id
|Строка
|Идентификатор запроса за данными для автоподбора
|

|value-field-id
|Строка
|Идентификатор поля выборки отображаемое в автоподборе
|name

|search-filter-id
|Строка
|Идентификатор фильтра используемый для поиска
|name
|===

Пример::
[source,xml]
----
<auto-complete query-id="labels" value-field-id="surname" search-filter-id="surnameLike"/>
----


=== <input-money>
Компонент ввода денежных единиц

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|suffix
|Строка
|Суффикс
|

|prefix
|Строка
|Префикс
|

|thousands-separator
|Строка
|Знак, отделяющий группу из трех разрядов
|

|decimal-separator
|Строка
|Знак, отделяющий дробную часть
|

|integer-limit
|Число
|Ограничение по количеству знаков целой части
|

|fraction-formatting
|off, manual, auto
|Форматирование дробной части
|off

|===

Пример::
[source,xml]
----
<input-money id="money" prefix="$" thousands-separator=" "
    decimal-separator="," integer-limit="100" fraction-formatting="manual">
</input-money>
----

=== <password>
Компонент ввода пароля

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|eye
|true false
|Отображать кнопку "Показать пароль" или нет
|true

|===

Пример::
[source,xml]
----
<password id="password" eye="true"/>
----

=== <output-text>
=== <masked-input>
=== <checkbox>
Компонент ввода флажок

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|unchecked
|null или false
|Значение, которое будет отправлялться если чекбокс не отмечен.
|null

|===

Пример::
[source,xml]
----
<checkbox id="vip" unchecked="false"/>
----

=== <date-time>
Компонент ввода даты и времени

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|date-format
|DD.MM.YYYY DD/MM/YYYY
|Формат отображения даты
|DD.MM.YYYY

|time-format
|HH:mm HH:mm:ss
|Формат отображения времени
|

|min
|Строка
|Минимальная дата возможная для выбора
|

|max
|Строка
|Максимальная дата возможная для выбора дата
|

|utc
|true false
|Всемирное координированное время
|false

|===

Пример::
[source,xml]
----
<date-time id="date" date-format="DD.MM.YYYY" min="2018-01-01T08:00:00Z" utc="true"/>
----

=== <file-upload>

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|multi
|true false
|Поддержка загрузки нескольких файлов
|false

|ajax
|true false
|Поддержка загрузки через ajax запрос
|true

|upload-url
|Строка
|URL загрузки файла
|

|delete-url
|Строка
|URL удаления файла
|

|value-field-id
|Ссылка на поле
|Поле выборки, содержащее идентификатор файла
|

|label-field-id
|Ссылка на поле
|Поле выборки, содержащее наименование файла
|

|url-field-id
|Ссылка на поле
|Поле выборки, содержащее URL скачивания файла
|

|request-param
|Строка
|Наименование поля в запросе miltipart form data
|

|show-size
|true false
|Отображение размера файла
|

|===
Пример::
[source,xml]
    <file-upload id="file"
                 label="Загрузить файл"
                 class="custom-class"
                 multi="true"
                 ajax="true"
                 upload-url="/n2o/data"
                 delete-url="/files/delete/{file.id}"
                 value-field-id="hash"
                 label-field-id="filename"
                 url-field-id="url"
                 show-size="true"/>


=== <select>

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|cleanable
|true false
|Опция очистки компонента
|true

|===
Пример::
[source,xml]
----
<select id="gender" label="Пол" query-id="genders" cleanable="false" />
----

=== <input-select>

Атрибуты::

[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|type
|single, multi, checkboxes
|Тип списка для выбора
|single

|reset-on-blur
|true,false
|Стереть значение при потере фокуса
|true

|===

=== <select-tree>
=== <input-select-tree>

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|checking-strategy
|child, parent, all
|Стратегия выбора данных из дерева
|all

|max-tag-count
|Число
|Максимальное количество элементов в поле
|

|===
Пример::
[source,xml]
    <input-select-tree id="address" label="Адрес" checkboxes="true" checking-strategy="child">
        <inheritance-nodes parent-field-id="parent_id" label-field-id="name" value-field-id="id"
                           query-id="address" has-children-field-id="hasChildren"
                           search-filter-id="name">
        </inheritance-nodes>
    </input-select-tree>

=== <radio-group>
=== <checkbox-group>
=== <pills>
Компонент ввода Таблетки

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|type
|radio, checkboxes
|Тип выбора значений (radio - по одному, checkboxes - по несколько)
|checkboxes

|===

Пример::
[source,xml]
----
<pills id="choice" type="radio"/>
----

=== <list>
=== <grid>
=== <tree>
=== <date-interval>
Компонент ввода интервала дат

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|date-format
|DD.MM.YYYY DD/MM/YYYY
|Формат отображения даты
|DD.MM.YYYY

|time-format
|HH:mm HH:mm:ss
|Формат отображения времени
|

|min
|Строка
|Минимальная дата возможная для выбора
|

|max
|Строка
|Максимальная дата возможная для выбора дата
|

|utc
|true false
|Конвертация даты из локальной в UTC зону
|false

|===

Пример::
[source,xml]
----
<date-interval id="interval" date-format="DD/MM/YYYY"/>
----

=== <input-interval>

=== <text-area>
Компонент для ввода большого текста

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|rows
|Число
|Высота поля в строках текста
|

|placeholder
|Строка
|Подсказывающий текст
|

|===

Пример::
[source,xml]
----
<text-area id="comment" rows="3" placeholder="Введите свой комментарий"/>
----

=== <text-editor>
=== <code-editor>
=== <text>
Компонент текста

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|format
|Строка
|Форматирование текста
|

|===

Пример::
[source,xml]
----
<text>Привет, {username}</text>
----

Тело::
Текст с плейсхолдерами


=== <html>
Компонент разметки

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|height
|Число
|Высота блока
|

|url
|Строка
|URL адрес HTML страницы
|

|===

Пример::
[source,xml]
----
<html height="200">
  <h1>Привет, {username}</h1>
  <p>Текст параграфа</p>
</html>
----

Тело::
HTML разметка с плейсхолдерами


=== <code>
Компонент программного кода с подсветкой синтексиса

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|language
|javaScript, java, sql, xml, python, ruby, shell
|Синтексис языка
|

|file
|Строка
|Адрес файла, содержащего программный код
|

|height
|Число
|Высота блока
|

|===

Пример::
[source,xml]
----
<code language="sql">
SELECT * FROM {tablename}
</code>
----

Тело::
Код с плейсхолдерами

=== <image>
Компонент изображения

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|url
|Строка
|URL адрес изображения
|

|alt
|Строка
|Подпись изображения
|

|align
|left, right, center
|Выравнивание
|center

|shape
|circle, rounded, polaroid
|Форма
|

|height
|Число
|Высота
|

|weight
|Число
|Ширина
|

|===

Пример::
[source,xml]
----
<image url="/myimage.png" weight="200" height="200"/>
----

=== <button>
Компонент кнопка

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|action-id
|Ссылка на link:#__action[действие виджета]
|Действие виджета, которое будет вызвано при нажатии на кнопку
|

|icon
|http://fontawesome.io/icons/[CSS класс]
|Иконка
|Вычисляется из `action-id`

|type
|text, icon, textAndIcon
|Кнопка с иконкой или без
|Если задан `icon`, то `iconAndText`, иначе `text`

|validate
|true false
|Валидировать форму после нажатия на кнопку?
|Для каждого действия свои умолчания.

|===

Тело::
link:#_Действия[Обработчик действия]

Пример::
[source,xml]
----
<button icon="icon-search" label="Поиск">
  <a href="https://google.com/search">
    <query-param name="q" value="{name}"/>
  </a>
</button>
----

=== <rating>
Компонент рейтинг

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|max
|integer
|Рейтинг по шкале от 1 до max
|5

|half
|true,false
|Можно ставить оценку с половиной (например 3.5)
|false

|show-tooltip
|true,false
|
|

|===
Пример::
[source,xml]
----
 <rating max="5" show-tooltip="false" half="false"/>
----


=== <field>
Произвольный React компонент.

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|src
|React компонент
|Реализация компонента
|

|===

Пример::
[source,xml]
----
<field src="MyControl"
       ext:prop1="value1"
       ext:prop2="value2"/>
----

=== <search-buttons>
На открываемой странице будут добавлены кнопки "Найти" и "Сбросить".
Кнопка "Найти" будет выполнять фильтрацию записей согласно указанным условиям.
Кнопка "Сбросить" сбрасывает действие всех фильтров.

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|clear-ignore
|Строка
|Поля, игнорируемые при сбросе фильтров
|

|===

Пример::

[source,xml]
----
<search-buttons id="search" clear-ignore="name,surname"/>
----

=== <slider>
Компонент ползунок

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|mode
|single range
|Одиночный ползунок / мульти-режим
|single

|vertical
|true false
|Вертикальное расположение элемента
|false

|measure
|Строка
|Единица измерения
|

|min
|Число
|Минимальное значение
|

|max
|Число
|Максимальное значение
|

|step
|Число
|Шаг приращения
|
|===
Пример::
[source,xml]
----
<slider id="percent" measure="%" min="0" max="100" step="5"/>
----
