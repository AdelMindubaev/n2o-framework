== Ячейки
Содержимое ячейки таблицы или строки списка.
Библиотека компонентов::
```
http://n2oapp.net/framework/config/schema/n2o-cell-2.0
```

=== Общие свойства

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|src
|React компонент
|Реализация ячейки
|Для каждой ячейки своя реализация по умолчанию.
Для `custom` атрибут обязательный.

|class
|CSS класс
|Класс стиля ячейки
|

|style
|CSS свойство
|Стиль ячейки
|

|visible
|true false
|Видимость ячейки
|

|===

=== <text>
Текст со стилем или без.

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|format
|Строка
|Формат текста
|

|subtext-field-id
|Строка
|Идентификатор поля второго уровня текста
|

|subtext-format
|Строка
|Формат второго уровня текста
|

|===

Тело::
link:#_Переключатель_switch[Переключатель]

[NOTE]
Сам текст берется из значения `text-field-id` в родительском элементе.

Пример::
[source,xml]
----
<text class="font-weight-bold" style="color:red;"/> <!--Жирный шрифт-->
----

=== <link>
Ссылка.

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|url
|Строка
|Адрес URL открываемой страницы
|

|target
|self, newWindow, application
|Сценарий открытия ссылки
|

|action-id
|Ссылка на действие виджета
|Действие виджета, которое будет вызвано при клике по ссылке
|

|icon
|Строка
|Иконка ссылки
|

|type
|text, icon, iconAndText
|Текст с иконкой или без
|text

|===

Тело::
link:#_Действия[Обработчик действия]

Пример::
[source,xml]
----
<link action-id="update"/>
----
[source,xml]
----
<link>
  <open-page page-id="personCard"/>
</link>
----

=== <icon>
Иконка.

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|text
|Строка
|Текст иконки
|Берётся из значения в `text-field-id`

|icon
|http://fontawesome.io/icons/[CSS класс]
|Класс иконки
|

|type
|icon, iconAndText
|С текстом или без
|icon

|position
|right, left
|Расположение текста
|

|===

Тело::
link:#_Действия[Обработчик действия]

Пример::
[source,xml]
----
<icon class="fa-pencil" type="iconAndText"/>
----
[source,xml]
----
<icon class="fa-id-card-o">
  <show-modal page-id="personCard"/>
</icon>
----

=== <checkbox>

Чекбокс.
[NOTE]
Значение true или false берется из значения `text-field-id`.

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|enabled
|true false
|Доступность чекбокса
|Если есть действие, то `true`, иначе `false`

|action-id
|Ссылка на действие
|Действие, которое выполнится при клике по чекбоксу
|

|===

Тело::
link:#_Действия[Обработчик действия]

Пример::
[source,xml]
----
<checkbox action-id="update"/>
----

[source,xml]
----
<checkbox>
  <invoke operation-id="update"/>
</checkbox>
----

=== <progress>
Индикатор прогресса.

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|class
|https://getbootstrap.com/docs/4.0/components/progress/#backgrounds[CSS class]
|Стиль индикатора
|

|active
|true false
|С анимацией загрузки?
|false

|size
|large, normal, small
|Размер индикатора прогресса
|normal

|striped
|true false
|С полосками?
|false

|color
|Строка
|Цвет индикатора
|

|===

Пример::
[source,xml]
----
<progress
  value="50"
  class="bg-success"
  size="small"/>
----

=== <image>
Изображение.

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|class
|https://getbootstrap.com/docs/4.0/content/images/[CSS class]
|Стиль обрамления
|

|width
|Число
|Ширина изображения (px)
|

|action-id
|Ссылка на действие виджета
|Действие виджета, которое выполнится при клике по иконке
|

|shape
|square, circle, rounded
|Форма картинки
|square

|title
|Строка
|Заголовок
|

|description
|Строка
|Подзаголовок
|

|text-position
|top, left, right, bottom
|Расположение текста относительно картинки
|right

|===

Тело::
link:#_Действия[Обработчик действия]

Пример::
[source,xml]
----
<image
  width="32"
  class="img-thumbnail">
    <statuses>
       <status/>
            ...
       <status/>
    </statuses>
    <action>
        <open-page page-id="profile"/>
    </action>
</image>
----

=== <statuses>
Список статусов.

=== <status>
Элемент статуса.

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|Src
|React компонент
|Реализация статуса
|Status

|field-id
|Строка
|Поле с данными для статуса
|

|icon
|Строка
|Иконка статуса
|

|place
|topLeft, topRight, bottomLeft, bottomRight
|Расположение статуса
|topLeft

|===

Пример::
[source,xml]
----
<status
    field-id="status"
    icon="{icon}"
    place="topLeft"
/>
----

=== <edit>
Редактирование значения.

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|action-id
|Ссылка на действие виджета
|Действие виджета, которое выполнится при завершении редактирования
|

|type
|inline, popup
|Расположение
|inline

|format
|Строка
|Формат текста
|

|enabled
|true false
|Условие доступности
|true

|===

Тело::
link:#_Поля_ввода[Поле ввода]

Пример::
[source,xml]
----
<edit action-id="update" type="popup">
  <date-time id="birthday"/>
</edit>
----

=== <toolbar>
Ячейка с кнопками.

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|generate
|Строка
|Генерация стандартных действий. Возможные значения: update, delete. Можно писать
несколько идентификаторов через запятую
|

|===
Пример::
[source,xml]
----
<toolbar>
  <button>...</button>
  <button>...</button>
  <button>...</button>
</toolbar>
----

==== <button>
Кнопка ячейки.

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|label
|Строка
|Подпись кнопки
|Вычисляется из action-id

|icon
|http://fontawesome.io/icons/[CSS класс]
|Иконка кнопки
|Вычисляется из action-id

|action-id
|Ссылка на действие виджета
|Действие виджета, которое выполнится при нажатии на кнопку
|

|class
|https://getbootstrap.com/docs/4.0/components/buttons/#examples[CSS класс]
|Стиль кнопки
|

|===

Тело::
link:#_Действия[Обработчик действия]

Пример::
[source,xml]
----
<toolbar>
  <button action-id="update"/>
  <button action-id="delete"/>
</toolbar>
----
[source,xml]
----
<toolbar>
  <button label="Изменить" icon="fa-pencil">
    <open-page page-id="personCard" action-id="update"/>
  </button>
  <button label="Удалить" icon="fa-trash">
    <invoke operation-id="delete"/>
  </button>
</toolbar>
----

=== <badge>
Ячейка с текстом.

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|position
|right, left
|Расположение
|

|text
|Строка
|Текст вне значка
|

|color
|CSS класс
|Цвет значка
|

|format
|Строка
|Формат текста в значке
|

|text-format
|Строка
|Формат текста вне значка
|


|===

Тело::
link:#_Переключатель_switch[Переключатель цвета]

Пример::
[source,xml]
----
<badge text="{status}" position="right">
  <switch>
       <case value="1">success</case>
       <case value="2">danger</case>
       <default>info</default>
  </switch>
</badge>
----

=== <list>
Ячейка со списком.

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию


|size
|Число
|Количество элементов для группировки
|

|color
|CSS класс
|Цвет элементов
|

|label-field-id
|Вложенное поле столбца
|Отображаемое поле в объекте, если столбец - массив объектов. Если отсутствует, то столбец является массивом строк.
|

|===

Тело::
link:#_Переключатель_switch[Переключатель цвета]

Пример::
[source,xml]
----
<list color="secondary" size="3"/>
----

=== <rating>
Рейтинг.

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|show-tooltip
|true false
|Показать подсказку
|false

|half
|true false
|Использование в качестве значений помимо целых чисел
 также и половинок целых чисел (0, 0.5, 1, 1.5, ...)
|false

|max
|Число
|Максимальное значение
|5

|readonly
|true false
|Предназначен только для чтения
|true

|action-id
|Ссылка на действие
|Ссылка на обработчик изменения рейтинга
|

|===

Тело:: link:#_Действия[Обработчик действия]

Пример::
[source,xml]
----
<rating show-tooltip="true" half="true"/>
----

[source,xml]
----
<rating readonly="false">
  <invoke operation-id="update"/>
</rating>
----

=== <tooltip-list>
Ячейка с тултипом и раскрывающимся текстовым списком.
Раскрывающийся список появляется при количестве элементов больше одного.
Иначе ячейка будет пустой или отображать единственное значение.

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|label
|Строка
|Универсальный заголовок поля.
Нужно использовать либо универсальный заголовок, либо 2 вида
заголовков (label-few, label-many) при разном числе элементов.
Если не задать ни один, то ячейка будет пустой.
|

|label-few
|Строка
|Заголовок поля при нескольких элементах
|

|label-many
|Строка
|Заголовок поля при большом числе элементов
|

|dashed-label
|true false
|Подчеркивание заголовка пунктиром
|true

|trigger
|click hover
|Действие, при котором раскрывается список
|hover

|===

Пример::
[source,xml]
----
<tooltip-list label="Объектов {size} шт"/>
<tooltip-list label-few="{size} объекта" label-many="{size} объектов"/>
----

=== <switch>
Переключатель ячеек.

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию


|value-field-id
|Ссылка на значение поля
|Значение, в зависимости от которого будет выбираться тип ячейки
|

|===

Пример::
[source,xml]
----
<switch value-field-id="type.id">
  <case value="type1">
    <badge/>
  </case>
  <case value="type2">
    <icon/>
  </case>
  <default>
    <text/>
  </default>
</switch>
----

==== <case>
Вариант переключения.

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|value
|Строка
|Значение, с которым сравнивается `value-field-id`
|

|===

Тело::
Тип ячейки, который будет выбран, в случае верного условия.

==== <default>
Ячейка по умолчанию.

Тело::
Тип ячейки, которая будет выбрана, если ни один из вариантов case не был выбран ранее.

=== <cell>
Настраиваемая ячейка.

Пример::
[source,xml]
----
<cell src="MyCell"
  ext:prop1="value1"
  ext:prop2="value2">
</cell>
----


=== <file-upload>
Ячейка таблицы/списка позволяющая загрузить файл.
По нажатию на "Загрузить" будет открыт стандартный диалог выбора файла на компьютере пользователя.
После выбора файл загружается на сервер, в ячейке появляется ссылка на его скачивание вместо кнопки "Загрузить" и кнопка удаления.

Атрибуты::
[cols="2,1,4,4"]
|===
|Наименование|Тип|Описание|Значение по умолчанию

|label
|Строка
|Универсальный заголовок поля.
|

|multi
|true false
|Поддержка загрузки нескольких файлов
|false

|ajax
|true false
|Поддержка загрузки через ajax запрос
|true

|upload-url
|Строка
|URL загрузки файла
|

|delete-url
|Строка
|URL удаления файла
|

|value-field-id
|Ссылка на поле
|Поле выборки, содержащее идентификатор файла
|id

|label-field-id
|Ссылка на поле
|Поле выборки, содержащее наименование файла
|name

|message-field-id
|Ссылка на поле
|Поле выборки, содержащее сообщение файла
|message

|url-field-id
|Ссылка на поле
|Поле выборки, содержащее URL скачивания файла
|url

|request-param
|Строка
|Наименование поля в запросе miltipart form data
|file

|show-size
|true false
|Отображение размера файла
|true

|accept
|Строка
|Доступные расширения файлов (через запятую)
|

|delete-icon
|Строка
|Иконка удаления файлов
|

|upload-icon
|Строка
|Иконка загрузки файлов
|

|===

Пример::
[source,xml]
----
<file-upload label="Загрузить файл"
             upload-url="/n2o/data"
             delete-url="/files/delete/{file.id}"
             accept=".img,.png"/>

----