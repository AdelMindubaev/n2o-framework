{
  "id": "proto",
  "src": "StandardPage",
  "regions": {
    "single": [
      {
        "src": "PanelRegion",
        "hasTabs": false,
        "headerTitle": "Данные пациента",
        "open": true,
        "collapsible": false,
        "fullScreen": false,
        "header": true,
        "panels": [
          {
            "id": "panel1",
            "label": "Пациенты",
            "opened": true,
            "widgetId": "proto_patients"
          }
        ]
      }
    ]
  },
  "widgets": {
    "proto_patients": {
      "src": "AdvancedTableWidget",
      "dataProvider": {
        "url": "n2o/data/proto",
        "pathMapping": {},
        "queryMapping": {}
      },
      "table": {
        "fetchOnInit": true,
        "autoFocus": true,
        "size": 10,
        "hasFocus": true,
        "hasSelect": true,
        "cells": [
          {
            "id": "surname",
            "fieldKey": "surname",
            "src": "LinkCell",
            "actionId": "surname"
          },
          {
            "id": "name",
            "fieldKey": "name",
            "src": "LinkCell",
            "actionId": "name"
          },
          {
            "id": "patrName",
            "fieldKey": "patrName",
            "src": "LinkCell",
            "url": "`'/'+id+'/update2'`",
            "target": "application",
            "visible": "`name!='Мария'`"
          },
          {
            "id": "birthday",
            "fieldKey": "birthday",
            "src": "EditableCell",
            "actionId": "update_birthday",
            "control": {
              "src": "DatePicker",
              "id": "birthday",
              "dateFormat": "DD.MM.YYYY",
              "utc": false,
              "outputFormat": "YYYY-MM-DDTHH:mm:ss"
            },
            "format": "date DD.MM.YYYY",
            "editFieldId": "birthday",
            "editType": "inline",
            "editable": true
          },
          {
            "id": "genderName",
            "fieldKey": "genderName",
            "src": "BadgeCell",
            "color": "`gender.id==1?'danger':'success'`"
          },
          {
            "id": "vip",
            "fieldKey": "vip",
            "src": "CheckboxCell",
            "actionId": "vip",
            "disabled": "`!(name!='Мария')`"
          },
          {
            "id": "",
            "fieldKey": "",
            "src": "ButtonsCell",
            "buttons": [
              {
                "id": "subMenu0",
                "icon": "fa fa-ellipsis-v",
                "conditions": {},
                "subMenu": [
                  {
                    "id": "delete",
                    "icon": "fa fa-trash",
                    "actionId": "delete",
                    "conditions": {
                      "enabled": [
                        {
                          "expression": "!_.isEmpty(this)",
                          "modelLink": "models.resolve['proto_patients']"
                        }
                      ]
                    },
                    "confirm": {
                      "text": "`'Вы уверены, что хотите удалить пациента ' + this.surname + ' ' + this.name + '?'`",
                      "title": "Предупреждение",
                      "okLabel": "Да",
                      "cancelLabel": "Нет",
                      "modelLink": "models.resolve['proto_patients']"
                    },
                    "title": "Удалить"
                  },
                  {
                    "id": "update",
                    "icon": "fa fa-pencil",
                    "actionId": "update",
                    "conditions": {
                      "enabled": [
                        {
                          "expression": "!_.isEmpty(this)",
                          "modelLink": "models.resolve['proto_patients']"
                        }
                      ]
                    },
                    "title": "Изменить"
                  }
                ]
              }
            ]
          }
        ],
        "headers": [
          {
            "id": "surname",
            "label": "Фамилия",
            "src": "TextTableHeader",
            "sortable": true
          },
          {
            "id": "name",
            "label": "Имя",
            "src": "TextTableHeader",
            "sortable": true
          },
          {
            "id": "patrName",
            "label": "Отчество",
            "src": "TextTableHeader",
            "sortable": true
          },
          {
            "id": "birthday",
            "label": "Дата рождения",
            "src": "TextTableHeader",
            "sortable": true
          },
          {
            "id": "genderName",
            "label": "Пол",
            "src": "TextTableHeader",
            "sortable": false
          },
          {
            "id": "vip",
            "label": "VIP",
            "src": "TextTableHeader",
            "sortable": false
          },
          {
            "id": "",
            "src": "TextTableHeader"
          }
        ],
        "sorting": {
          "birthday": "ASC"
        }
      }
    }
  },
  "models": {
    "filter['proto_patients'].genders": {
      "link": "models.filter['proto_patients'].genders"
    }
  }
}