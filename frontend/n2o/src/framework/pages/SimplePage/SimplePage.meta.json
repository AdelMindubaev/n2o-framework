{
  "id": "proto",
  "src": "SimplePage",
  "widget": {
    "src": "AdvancedTableWidget",
    "dataProvider": {
      "url": "n2o/data/proto",
      "pathMapping": {},
      "queryMapping": {}
    },
    "paging": {
      "size": 10
    },
    "table": {
      "fetchOnInit": true,
      "autoFocus": true,
      "size": 10,
      "hasFocus": true,
      "hasSelect": true,
      "cells": [
        {
          "id": "surname",
          "fieldKey": "surname",
          "src": "TextCell"
        },
        {
          "id": "name",
          "fieldKey": "name",
          "src": "TextCell"
        },
        {
          "id": "patrName",
          "fieldKey": "patrName",
          "src": "TextCell"
        },
        {
          "id": "birthday",
          "fieldKey": "birthday",
          "src": "TextCell"
        },
        {
          "id": "genderName",
          "fieldKey": "genderName",
          "src": "BadgeCell",
          "color": "`gender.id==1?'danger':'success'`"
        },
        {
          "id": "vip",
          "fieldKey": "vip",
          "src": "CheckboxCell",
          "actionId": "vip",
          "disabled": "`!(name!='Мария')`"
        },
        {
          "id": "",
          "fieldKey": "",
          "src": "ButtonsCell",
          "buttons": [
            {
              "id": "subMenu0",
              "icon": "fa fa-ellipsis-v",
              "conditions": {},
              "subMenu": [
                {
                  "id": "delete",
                  "icon": "fa fa-trash",
                  "actionId": "delete",
                  "conditions": {
                    "enabled": [
                      {
                        "expression": "!_.isEmpty(this)",
                        "modelLink": "models.resolve['proto_patients']"
                      }
                    ]
                  },
                  "confirm": {
                    "text": "`'Вы уверены, что хотите удалить пациента ' + this.surname + ' ' + this.name + '?'`",
                    "title": "Предупреждение",
                    "okLabel": "Да",
                    "cancelLabel": "Нет",
                    "modelLink": "models.resolve['proto_patients']"
                  },
                  "title": "Удалить"
                },
                {
                  "id": "update",
                  "icon": "fa fa-pencil",
                  "actionId": "update",
                  "conditions": {
                    "enabled": [
                      {
                        "expression": "!_.isEmpty(this)",
                        "modelLink": "models.resolve['proto_patients']"
                      }
                    ]
                  },
                  "title": "Изменить"
                }
              ]
            }
          ]
        }
      ],
      "headers": [
        {
          "id": "surname",
          "label": "Фамилия",
          "src": "TextTableHeader",
          "sortable": true
        },
        {
          "id": "name",
          "label": "Имя",
          "src": "TextTableHeader",
          "sortable": true
        },
        {
          "id": "patrName",
          "label": "Отчество",
          "src": "TextTableHeader",
          "sortable": true
        },
        {
          "id": "birthday",
          "label": "Дата рождения",
          "src": "TextTableHeader",
          "sortable": true
        },
        {
          "id": "genderName",
          "label": "Пол",
          "src": "TextTableHeader",
          "sortable": false
        },
        {
          "id": "vip",
          "label": "VIP",
          "src": "TextTableHeader",
          "sortable": false
        },
        {
          "id": "",
          "src": "TextTableHeader"
        }
      ],
      "sorting": {
        "birthday": "ASC"
      }
    }
  }
}